### **LV 1: 시장을 읽는 관찰자 (The Observer)**

모든 것의 시작은 시장을 이해하는 것부터입니다. 아직 거래는 하지 않습니다. 그저 데이터를 가져와 보고하는 가장 기본적인 블록입니다.

- **목표:** 내 계좌의 현재 상태와 보유 종목에 대한 최신 뉴스를 요약하여 보고받는다.
- **핵심 기능:** 데이터 수집 및 요약 (순차적 흐름)
- **랭그래프 관점:**
  - **노드(Node):** `계좌 상태 조회`, `뉴스 수집`, `결과 요약 및 보고` 라는 3개의 간단한 노드가 필요합니다.
  - **엣지(Edge):** `계좌 조회 → 뉴스 수집 → 요약 보고` 로 이어지는 단 하나의 직선적인 길(엣지)을 만듭니다.
  - **상태(State):** 처음에는 비어있던 상태(State) 객체가, 첫 노드를 지나며 '포트폴리오 정보'가 담기고, 두 번째 노드를 지나며 '종목별 뉴스'가 추가되고, 마지막 노드에서 이 모든 것을 종합하여 '일일 보고서'를 완성합니다.

> [LV 1 완성] 우리는 이제 매일 아침 자동으로 내 주식 계좌를 브리핑해주는 비서를 갖게 되었습니다. 아직 똑똑하진 않지만, 시스템의 뼈대를 이루는 가장 중요한 첫 블록입니다.

---

### **LV 2: 규칙을 따르는 실행자 (The Rule-Follower)**

이제 간단한 의사결정 능력을 부여합니다. 정해진 규칙에 따라 행동하는 갈림길 블록을 추가합니다.

- **목표:** "만약 A 종목의 기술적 지표가 특정 조건을 만족하면, 지정된 수량만큼 매수한다."
- **핵심 기능:** 조건부 매매 실행 (조건부 분기)
- **랭그래프 관점:**
  - **새로운 노드:** `기술적 지표 분석` 노드와, 실제 주문을 넣는 `주문 실행` 노드를 추가합니다.
  - **조건부 엣지(Conditional Edge):** `기술적 지표 분석` 노드 다음에 갈림길을 만듭니다.
    - `if 매수 신호 발생 then` → `주문 실행` 노드로 가는 엣지
    - `else` → 즉시 그래프를 **종료(End)**하는 엣지
  - **상태(State):** 상태 객체에 '매수 신호 여부'(`True`/`False`)라는 정보가 추가되고, 조건부 엣지는 이 값을 보고 길을 결정합니다.

> [LV 2 완성] 시스템은 이제 단순한 관찰자를 넘어, 정해진 규칙에 따라 스스로 행동하는 '자동화'의 첫걸음을 떼었습니다. 하지만 아직 하나의 지표만 보는 단세포적인 수준입니다.

---

### **LV 3: 여러 전문가의 의견을 듣는 전략가 (The Strategist)**

하나의 의견은 위험합니다. 여러 전문가(에이전트)의 의견을 종합하여 결정을 내리는 협업 블록을 추가합니다.

- **목표:** 기술적 분석, 기업 기본적 분석, 시장 심리 분석을 동시에 고려하여 매매를 결정한다.
- **핵심 기능:** 멀티 에이전트 분석 및 합의 기반 의사결정
- **랭그래프 관점:**
  - **멀티 에이전트(노드):** `기술적 분석가`, `기본적 분석가`, `시장 심리 분석가` 라는 3개의 독립적인 분석 노드를 만듭니다. 이들을 총괄하는 `슈퍼바이저` 노드(라우터)가 이들에게 동시에 분석을 지시합니다.
  - **상태 기반 합의:** 각 분석가는 자신의 의견('매수', '저평가', '긍정적')을 중앙 `상태(State)` 객체에 보고합니다. `슈퍼바이저`는 상태에 기록된 모든 의견을 확인합니다.
  - **복합 조건부 엣지:** `슈퍼바이저`의 조건부 엣지는 이제 더 복잡해집니다.
    - `if 기술=='매수' AND 기본=='저평가' AND 심리=='긍정적' then` → `주문 실행`
    - `else` → **종료**

> [LV 3 완성] 우리의 시스템은 이제 한 분야의 전문가가 아닌, 여러 전문가로 구성된 '투자 위원회'처럼 행동합니다. 훨씬 신중하고 종합적인 판단을 내릴 수 있게 되었습니다.

---

### **LV 4: 스스로 포트폴리오를 관리하는 펀드매니저 (The Autonomous Fund Manager)**

개별 종목 거래를 넘어, 전체 포트폴리오의 균형을 맞추는 자율적인 관리자 블록을 추가합니다. 거래를 실행하고, 왜 그런 결정을 내렸는지 스스로 기록하고 보고합니다.

- **목표:** 포트폴리오 리밸런싱 계획을 스스로 수립하고, 자동으로 실행한 뒤, 그 결정 근거와 결과를 관리자에게 보고한다.
- **핵심 기능:** 포트폴리오 진단, 거래 계획 수립, 자동 실행, 사후 보고
- **랭그래프 관점:**
  - **워크플로우 확장:** 기존의 단일 종목 분석이 아닌, `포트폴리오 진단` → `시장 기회 탐색` → `거래 계획 수립` → `리스크 점검` → `주문 실행` → `기록 및 보고`로 이어지는 고도화된 워크플로우를 구성합니다.
  - **LLM의 역할 확장:** AI(LLM)는 이제 단순 분석을 넘어, "A 주식을 매도하고 B 주식을 매수하는 이유는..." 과 같이 자신의 결정에 대한 **상세한 근거(`justification_text`)**를 생성하는 핵심적인 역할을 맡습니다.
  - **데이터베이스 연동:** 워크플로우의 마지막 단계에서 모든 거래 내역과 '결정 근거'를 외부 데이터베이스에 영구적으로 기록합니다. 이것이 다음 레벨의 학습 재료가 됩니다.

> [LV 4 완성] 드디어 AI '펀드매니저'가 탄생했습니다. 정해진 규칙만 따르는 것을 넘어, 전체적인 상황을 보고 스스로 최적의 전략을 수립하고 실행하며, 자신의 행동을 투명하게 설명할 수 있게 되었습니다.

---

### **LV 5: 과거로부터 배우는 현자 (The Self-Learning Master)**

마지막으로, 스스로의 과거를 돌아보고 더 나은 내일을 만드는 '성찰'이라는 궁극의 블록을 추가합니다.

- **목표:** 과거의 성공/실패 거래 기록을 스스로 분석하여, 자신의 투자 전략(규칙, 프롬프트)을 자동으로 개선한다.
- **핵심 기능:** 주기적인 자가 성찰 및 시스템 로직 자동 업데이트
- **랭그래프 관점:**
  - **두 번째 그래프의 등장 (성찰 루프):** 기존의 `운영 루프`와는 별개로, 매주 일요일 밤에 실행되는 `성찰 및 개선 루프`라는 새로운 그래프를 만듭니다.
  - **성찰 루프의 워크플로우:**
    1. `성과 데이터 집계`: DB에서 지난주 거래 기록을 모두 가져와 수익률과 승률을 계산합니다.
    2. `성공/실패 요인 분석`: 특히 손실이 컸던 거래들의 '결정 근거'와 '당시 시장 상황'을 분석하여 실패의 공통적인 패턴을 찾아냅니다.
    3. `새로운 규칙 생성`: "변동성이 클 때는 특정 지표를 신뢰하지 않는다"와 같이 실패를 방지할 새로운 규칙을 LLM이 스스로 생성합니다.
    4. `프롬프트 자동 업데이트`: 생성된 규칙을 `운영 루프`가 사용하는 핵심 프롬프트 파일에 자동으로 추가합니다.
  - **두 그래프의 상호작용:** `운영 루프`는 DB에 기록을 남기고, `성찰 루프`는 DB를 읽고 `운영 루프`의 코어 로직을 수정합니다.

> [LV 5 최종 완성] 이제 우리의 시스템은 단순히 똑똑한 펀드매니저를 넘어, 경험을 통해 배우고 성장하는 '현자(Sage)'가 되었습니다. 시장에 적응하고, 실수를 통해 배우며, 시간이 지날수록 더욱 정교해지는 진정한 의미의 자가진화형 AI 트레이딩 시스템이 완성되었습니다.
